---
title: "软件设计模式——七大设计原则"
author: Jinkai
date: 2021-09-16 09:00:00 +0800
published: true
categories: [技术]
tags: [design patterns, design principles]
---

- **概述**

  设计模式，**是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结**。

  描述了在软件设计过程中的**一些不断重复发生的问题**，以及该问题的解决方案。

  是解决特定问题的一系列套路，是前辈们的代码设计经验的总结，具有一定的普遍性，可以反复使用。

  其目的是**为了提高代码的可重用性、代码的可读性和代码的可靠性**。

- **作用**

  - 提高思维能力、编程能力和设计能力。
  - 使程序**设计更加标准化**、代码编制**更加工程化**，使软件开发效率大大提高，从而**缩短软件的开发周期**。
  - 使设计的代码**可重用性高、可读性强、可靠性高、灵活性好、可维护性强**。

## [](#7种开发原则)7种开发原则

### [](#开闭原则)开闭原则

- 定义

  - **`Open Closed Principle，OCP`**

  - 软件实体应当**对扩展开放，对修改关闭**。即, 当应用的需求改变时，在不修改软件实体的源代码或者二进制代码的前提下，可以扩展模块的功能，使其满足新的需求。

- 作用

  - 对**软件测试**的影响

    测试时**只需要对扩展的代码进行测试**就可以了，因为原有的测试代码仍然能够正常运行。

  - 提高代码的**可复用**性

    粒度越小，被复用的可能性就越大；在面向对象的程序设计中，根据原子和抽象编程可以提高代码的可复用性。

  - 提高软件的**可维护**性

    稳定性高和延续性强，从而易于扩展和维护。

### [](#里氏替换原则)里氏替换原则

- 定义

  - `Liskov Substitution Principle，LSP`

  - **继承必须确保基类所拥有的性质在子类中仍然成立**。即, 子类可以扩展父类的功能，但不能改变父类原有的功能。

- 作用

  - 是实现开闭原则的重要方式之一。
  - 克服了继承中重写父类造成的可复用性变差的缺点。
  - 类的扩展不会给已有的系统引入新的错误，降低了代码出错的可能性。

### [](#依赖倒置原则)依赖倒置原则

- 定义

  - `Dependence Inversion Principle，DIP`

  - \*\*要面向接口编程，不要面向实现编程。\*\*即, 高层模块不应该依赖低层模块，两者都应该依赖其抽象；抽象不应该依赖细节，细节应该依赖抽象。

- 作用

  - 可以**降低类间的耦合性**。
  - 可以减少并行开发引起的风险。
  - 可以**提高代码的可读性**和可维护性。

### [](#单一职责原则)单一职责原则

- 定义

  - `Single Responsibility Principle，SRP`
  - 单一职责原则规定**一个类应该有且仅有一个引起它变化的原因**，否则类应该被拆分。
  - 如果一个对象承担了太多的职责，至少存在以下两个缺点
    - 一个职责的变化可能会削弱或者抑制这个类实现其他职责的能力；
    - **当客户端需要该对象的某一个职责时，不得不将其他不需要的职责全都包含进来，从而造成冗余代码**或代码的浪费。
- 作用

  - 降低类的复杂度。一个类只负责一项职责，其逻辑肯定要比负责多项职责简单得多。
  - **提高类的可读性**。复杂性降低，自然其可读性会提高。
  - 提高系统的可维护性。可读性提高，那自然更容易维护了。
  - 变更引起的风险降低。变更是必然的，如果单一职责原则遵守得好，当修改一个功能时，可以显著降低对其他功能的影响。

### [](#接口隔离原则)接口隔离原则

- 定义

  - `Interface Segregation Principle，ISP`
  - **客户端不应该被迫依赖于它不使用的方法**
  - **一个类对另一个类的依赖应该建立在最小的接口上**
  - 与单一职责原则的区别
    - 单一职责原则注重的是职责，而接口隔离原则注重的是对接口依赖的隔离。
    - 单一职责原则主要是约束类，它针对的是程序中的实现和细节；接口隔离原则主要约束接口，主要针对抽象和程序整体框架的构建。
- 作用

  - **将臃肿庞大的接口分解为多个粒度小的接口**，可以预防外来变更的扩散，提高系统的灵活性和可维护性。
  - 接口隔离提高了系统的内聚性，**减少了对外交互**，降低了系统的耦合性。
  - 使用多个专门的接口还能够体现对象的层次，因为可以通过接口的继承，实现对总接口的定义。
  - 能**减少项目工程中的代码冗余**。过大的大接口里面通常放置许多不用的方法，当实现这个接口的时候，被迫设计冗余的代码。

### [](#迪米特法则)迪米特法则

- 定义

  - `Law of Demeter，LoD`, 又叫作**最少知识原则**（`Least Knowledge Principle，LKP`\)
  - **如果两个软件实体无须直接通信，那么就不应当发生直接的相互调用**，可以通过第三方转发该调用。其目的是降低类之间的耦合度，提高模块的相对独立性。
- 作用

  - 降低了类之间的耦合度，提高了模块的相对独立性。
  - 由于亲合度降低，从而提高了类的可复用率和系统的扩展性。

### [](#合成复用原则)合成复用原则

- 定义

  - `Composite Reuse Principle，CRP`, 又叫**组合/聚合复用原则**（`Composition/Aggregate Reuse Principle，CARP`）。
  - 在软件复用时，要尽量**先使用组合或者聚合等关联关系**来实现，其次才考虑使用继承关系来实现。

- 作用

  - 通常类的复用分为**继承复用**和**合成复用**两种，继承复用虽然有简单和易实现的优点，但它也存在以下缺点:
    - **继承复用破坏了类的封装性**。因为继承会将父类的实现细节暴露给子类，父类对子类是透明的，所以这种复用又称为“白箱”复用。
    - **子类与父类的耦合度高。父类的实现的任何改变都会导致子类的实现发生变化**，这不利于类的扩展与
    - 它**限制了复用的灵活性。从父类继承而来的实现是静态的，在编译时已经定义，所以在运行时不可能发生变化。**
  - 采用组合或聚合复用时，可以**将已有对象纳入新对象中，使之成为新对象的一部分，新对象可以调用已有对象的功能**，它有以下优点:
    - 它维持了类的封装性。因为**成分对象的内部细节是新对象看不见的**，所以这种复用又称为“黑箱”复用。
    - 新旧类之间的耦合度低。这种复用所需的依赖较少，**新对象存取成分对象的唯一方法是通过成分对象的接口**。
    - 复用的灵活性高。这种复用可以在运行时动态进行，新对象可以动态地引用与成分对象类型相同的对象。

## 总结

|设计原则|	一句话归纳|	目的|
|:----|:----|:----|
|开闭原则|	对扩展开放，对修改关闭|	降低维护带来的新风险|
|依赖倒置原则	|高层不应该依赖低层，要面向接口编程	|更利于代码结构的升级扩展
|单一职责原则	|一个类只干一件事，实现类要单一	|便于理解，提高代码的可读性
|接口隔离原则	|一个接口只干一件事，接口要精简单一	|功能解耦，高聚合、低耦合
|迪米特法则	|不该知道的不要知道，一个类应该保持对其它对象最少的了解，降低耦合度	|只和朋友交流，不和陌生人说话，减少代码臃肿
|里氏替换原则	|不要破坏继承体系，子类重写方法功能发生改变，不应该影响父类方法的含义	|防止继承泛滥
|合成复用原则	|尽量使用组合或者聚合关系实现代码复用，少使用继承	|降低代码耦合

实际上，这些原则的目的只有一个：降低对象之间的耦合，增加程序的可复用性、可扩展性和可维护性。

> 记忆口诀：访问加限制，函数要节俭，依赖不允许，动态加接口，父类要抽象，扩展不更改。

在程序设计时，我们应该将程序功能最小化，每个类只干一件事。若有类似功能基础之上添加新功能，则要合理使用继承。对于多方法的调用，要会运用接口，同时合理设置接口功能与数量。最后类与类之间做到低耦合高内聚。

## 参考

- [23种经典设计模式(附c++实现代码) \| 王竹兴\| Blob](https://zhulao.gitee.io/blog/2019/03/31/23%E7%A7%8D%E7%BB%8F%E5%85%B8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F(%E9%99%84c++%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81)/index.html)
- [软件设计模式概述](http://c.biancheng.net/view/1317.html)
- [CS-Notes 设计模式](https://github.com/CyC2018/CS-Notes/blob/master/docs/notes/设计模式.md)
